import{_ as t,c as a,f as n,o as i}from"./app-C29LHsu0.js";const r={};function o(s,e){return i(),a("div",null,e[0]||(e[0]=[n('<h1 id="gacha-system-and-export-principles" tabindex="-1"><a class="header-anchor" href="#gacha-system-and-export-principles"><span>Gacha System and Export Principles</span></a></h1><p>Snap Hutao&#39;s wish system has undergone a complete architectural redesign compared to Snap Genshin.</p><p>This article will explain the wish record mechanism of Genshin Impact and the technical principles behind the wish export feature of Snap Hutao.</p><hr><h2 id="obtaining-wishes" tabindex="-1"><a class="header-anchor" href="#obtaining-wishes"><span>Obtaining Wishes</span></a></h2><p>Acquiring wish records requires querying miHoYo&#39;s API.</p><p>Regarding this API, there are the following key points to note:</p><ul><li>Through miHoYo&#39;s server API, you can only access wish records from the past year. <ul><li>This is also the source of wish records in the Genshin Impact client.</li></ul></li><li>The API has request rate limits; too many requests too quickly can lead to subsequent failures, making it impossible to retrieve data.</li></ul><h3 id="key-parameters-for-requesting-the-api" tabindex="-1"><a class="header-anchor" href="#key-parameters-for-requesting-the-api"><span>Key Parameters for Requesting the API</span></a></h3><p>To request this API, we need the following four key parameters:</p><ol><li>Banner Type</li><li>Wish Item</li><li>Time</li><li>Wish Record ID</li></ol><ul><li>Currently, known methods for obtaining these parameters include: <ol><li>Traversing Unity&#39;s log files to find URLs for wish records opened by the user.</li><li>Proxying local traffic to filter wish record URLs.</li><li>Searching the <code>CefBrowser</code>&#39;s browser cache to find wish record URLs.</li><li>Using a Cookie containing <code>SToken</code> to call the <code>genAuthKey</code> API and obtain the parameters.</li><li>Allowing advanced users to manually input relevant URLs.</li></ol></li></ul><h3 id="data-concatenation-and-generation-of-complete-records" tabindex="-1"><a class="header-anchor" href="#data-concatenation-and-generation-of-complete-records"><span>Data Concatenation and Generation of Complete Records</span></a></h3><p>After requesting the API, you can obtain fragmented wish records. Concatenating these records generates a complete wish record list.</p><hr><h2 id="wish-storage" tabindex="-1"><a class="header-anchor" href="#wish-storage"><span>Wish Storage</span></a></h2><p>The complete wish record list, once obtained, is serialized and stored in a local database, and deserialized when needed to present it to the user.</p><ul><li>In subsequent requests, Snap Hutao only needs to compare with the data in the database to obtain the newly added data.</li><li>This approach ensures that users can permanently save the complete wish records for their accounts.</li></ul><hr><h2 id="uigf-format" tabindex="-1"><a class="header-anchor" href="#uigf-format"><span>UIGF Format</span></a></h2><blockquote><p>Uniformed Interchangeable GachaLog Format Standard</p></blockquote><p><code>UIGF</code> is a unified wish record data exchange standard that we, in collaboration with other wish record applications, advocate, launched, and <strong>persistently maintain</strong>.</p><p>The standardized data format allows users to freely transfer data between different tools, thereby utilizing the unique functions of each tool.</p><h3 id="importing-wishes" tabindex="-1"><a class="header-anchor" href="#importing-wishes"><span>Importing Wishes</span></a></h3><p>Using the <code>UIGF</code> data format, you can import wish record data stored in other applications.</p><ul><li>When importing data, Snap Hutao compares the earliest index (ID) in local storage and only imports older records.</li><li>New data can always be obtained from miHoYo&#39;s servers, and its original data has higher precision.</li></ul><h3 id="exporting-wishes" tabindex="-1"><a class="header-anchor" href="#exporting-wishes"><span>Exporting Wishes</span></a></h3><p>Snap Hutao supports saving wish records in the <code>UIGF</code> data format as files and outputting them to a user-specified folder.</p><p>Users can continue to use their wish records in other tools that support the <code>UIGF</code> format through the exported files.</p>',29)]))}const l=t(r,[["render",o],["__file","Gacha-system-and-export-principal.html.vue"]]),c=JSON.parse(`{"path":"/en/advanced/Gacha-system-and-export-principal.html","title":"Gacha System and Export Principles","lang":"en-US","frontmatter":{"headerDepth":2,"category":["FAQ"],"icon":"iconfont icon-read","order":8,"comment":false,"description":"Snap Hutao uses various methods to obtain users' login information and combines it with the Genshin Impact API to retrieve wish records.","banner":"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/en/advanced/Gacha-system-and-export-principal.html&has_description=False","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://hut.ao/zh/advanced/Gacha-system-and-export-principal.html"}],["link",{"rel":"alternate","hreflang":"id-id","href":"https://hut.ao/id/advanced/Gacha-system-and-export-principal.html"}],["link",{"rel":"alternate","hreflang":"ru-ru","href":"https://hut.ao/ru/advanced/Gacha-system-and-export-principal.html"}],["link",{"rel":"alternate","hreflang":"ja-jp","href":"https://hut.ao/jp/advanced/Gacha-system-and-export-principal.html"}],["meta",{"property":"og:url","content":"https://hut.ao/en/advanced/Gacha-system-and-export-principal.html"}],["meta",{"property":"og:site_name","content":"Snap Hutao"}],["meta",{"property":"og:title","content":"Gacha System and Export Principles"}],["meta",{"property":"og:description","content":"Snap Hutao uses various methods to obtain users' login information and combines it with the Genshin Impact API to retrieve wish records."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/en/advanced/Gacha-system-and-export-principal.html&has_description=False"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"id-ID"}],["meta",{"property":"og:locale:alternate","content":"ru-RU"}],["meta",{"property":"og:locale:alternate","content":"ja-JP"}],["meta",{"property":"og:updated_time","content":"2025-01-12T04:59:21.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/en/advanced/Gacha-system-and-export-principal.html&has_description=False"}],["meta",{"name":"twitter:image:alt","content":"Gacha System and Export Principles"}],["meta",{"property":"article:modified_time","content":"2025-01-12T04:59:21.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Gacha System and Export Principles\\",\\"image\\":[\\"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/en/advanced/Gacha-system-and-export-principal.html&has_description=False\\"],\\"dateModified\\":\\"2025-01-12T04:59:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DGP-Studio\\",\\"url\\":\\"https://github.com/DGP-Studio\\"}]}"],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://hut.ao/en/rss.xml","title":"Snap Hutao RSS Feed"}]]},"headers":[{"level":2,"title":"Obtaining Wishes","slug":"obtaining-wishes","link":"#obtaining-wishes","children":[{"level":3,"title":"Key Parameters for Requesting the API","slug":"key-parameters-for-requesting-the-api","link":"#key-parameters-for-requesting-the-api","children":[]},{"level":3,"title":"Data Concatenation and Generation of Complete Records","slug":"data-concatenation-and-generation-of-complete-records","link":"#data-concatenation-and-generation-of-complete-records","children":[]}]},{"level":2,"title":"Wish Storage","slug":"wish-storage","link":"#wish-storage","children":[]},{"level":2,"title":"UIGF Format","slug":"uigf-format","link":"#uigf-format","children":[{"level":3,"title":"Importing Wishes","slug":"importing-wishes","link":"#importing-wishes","children":[]},{"level":3,"title":"Exporting Wishes","slug":"exporting-wishes","link":"#exporting-wishes","children":[]}]}],"git":{"createdTime":1664413369000,"updatedTime":1736657961000,"contributors":[{"name":"Masterain","username":"Masterain","email":"i@irain.in","commits":19,"url":"https://github.com/Masterain"},{"name":"Mikachu2333","username":"Mikachu2333","email":"mikachu.23333@zohomail.com","commits":2,"url":"https://github.com/Mikachu2333"},{"name":"LinkChou","username":"LinkChou","email":"linkchou@yandex.com","commits":1,"url":"https://github.com/LinkChou"},{"name":"Mr.Hope","username":"Mr.Hope","email":"mister-hope@outlook.com","commits":3,"url":"https://github.com/Mr.Hope"},{"name":"Natsume","username":"Natsume","email":"wardanadm2@gmail.com","commits":1,"url":"https://github.com/Natsume"}]},"readingTime":{"minutes":1.65,"words":495},"filePathRelative":"en/advanced/Gacha-system-and-export-principal.md","localizedDate":"September 29, 2022"}`);export{l as comp,c as data};
