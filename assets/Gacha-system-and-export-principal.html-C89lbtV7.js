import{_ as a,c as t,f as n,o as i}from"./app-lg6nKMfF.js";const l={};function r(p,e){return i(),t("div",null,e[0]||(e[0]=[n('<h1 id="祈願システムとエクスポートの原理" tabindex="-1"><a class="header-anchor" href="#祈願システムとエクスポートの原理"><span>祈願システムとエクスポートの原理</span></a></h1><blockquote><p>Gacha System and Principal</p></blockquote><p>胡桃の祈願システムは、Snap Genshinと比較して、アーキテクチャ全体が再設計されています。</p><p>この記事では、原神の祈願履歴のメカニズムと、Snap Hutaoの祈願エクスポート機能の技術的な原理について説明します。</p><hr><h2 id="祈願の取得" tabindex="-1"><a class="header-anchor" href="#祈願の取得"><span>祈願の取得</span></a></h2><p>祈願履歴を取得するには、miHoYoのAPIをリクエストする必要があります。</p><p>このAPIには、以下の注意事項があります。</p><ul><li>miHoYoサーバーのAPIを通じて、過去1年間の祈願履歴のみを照会できます。 <ul><li>これは、原神クライアントでの祈願履歴のソースでもあります。</li></ul></li><li>APIにはリクエストレート制限があり、リクエストが速すぎると、後続のリクエストが失敗し、正常にデータを取得できなくなります。</li></ul><h3 id="apiリクエストのキーパラメーター" tabindex="-1"><a class="header-anchor" href="#apiリクエストのキーパラメーター"><span>APIリクエストのキーパラメーター</span></a></h3><p>このAPIをリクエストするには、次の4つのキーパラメーターが必要です。</p><ol><li>ガチャの種類</li><li>抽出アイテム</li><li>時間</li><li>抽出履歴ID</li></ol><ul><li>現在、これらのパラメーターを取得する方法として、以下のものが知られています。 <ol><li>Unityのログファイルを調べて、ユーザーが開いた祈願履歴のURLを検索します。</li><li>本機のトラフィックをプロキシし、祈願履歴のURLをフィルタリングします。</li><li><code>CefBrowser</code>のブラウザキャッシュを調べて、祈願履歴のURLを見つけます。</li><li><code>SToken</code>を含むCookieを使用して<code>genAuthKey</code> APIを呼び出し、パラメーターを取得します。</li><li>上級ユーザーに関連URLを手動で入力してもらいます。</li></ol></li></ul><h3 id="データ連結と完全な履歴の生成" tabindex="-1"><a class="header-anchor" href="#データ連結と完全な履歴の生成"><span>データ連結と完全な履歴の生成</span></a></h3><p>APIをリクエストした後、バラバラの祈願履歴を取得できます。これらの履歴を連結することで、完全な祈願履歴リストを生成できます。</p><hr><h2 id="祈願の保存" tabindex="-1"><a class="header-anchor" href="#祈願の保存"><span>祈願の保存</span></a></h2><p>完全な祈願履歴リストは、取得後にローカルデータベースにシリアル化されて保存され、必要に応じて逆シリアル化されてユーザーに表示されます。</p><ul><li>後続のリクエストでは、Snap Hutaoはデータベース内のデータと照合して、追加された部分のデータのみを取得します。</li><li>この方法により、ユーザーはアカウントの完全な祈願履歴を長期にわたって保存できます。</li></ul><hr><h2 id="uigf形式" tabindex="-1"><a class="header-anchor" href="#uigf形式"><span>UIGF形式</span></a></h2><blockquote><p>統一可交換祈願記録標準 Uniformed Interchangeable GachaLog Format Standard</p></blockquote><p><code>UIGF</code>は、私たちが他の祈願履歴アプリケーションと共同で提唱、導入し、<strong>長期的にメンテナンス</strong>している統一された祈願履歴データ交換規格です。</p><p>標準化されたデータ形式により、ユーザーは異なるツール間で自由にデータを転送し、各ツールの特徴的な機能を使用できます。</p><h3 id="祈願のインポート" tabindex="-1"><a class="header-anchor" href="#祈願のインポート"><span>祈願のインポート</span></a></h3><p><code>UIGF</code>データ形式を使用すると、他のアプリケーションに保存されている祈願履歴データをインポートできます。</p><ul><li>Snap Hutaoはデータをインポートする際に、ローカルストレージの最も古いインデックス（ID）と比較し、より古い履歴のみをインポートします。</li><li>新しいデータは常にmiHoYoサーバーから取得でき、元のデータの精度が高くなります。</li></ul><h3 id="祈願のエクスポート" tabindex="-1"><a class="header-anchor" href="#祈願のエクスポート"><span>祈願のエクスポート</span></a></h3><p>Snap Hutaoは、祈願履歴を<code>UIGF</code>データ形式でファイルとして保存し、ユーザーが指定したフォルダに出力することをサポートしています。</p><p>ユーザーは、エクスポートされたファイルを介して、<code>UIGF</code>形式をサポートする他のツールで祈願履歴を引き続き使用できます。</p><div class="hint-container important"><p class="hint-container-title">重要</p><p>これは Google Gemini モデルによって作成された翻訳であり、PRによる修正を歓迎します。</p></div>',31)]))}const c=a(l,[["render",r],["__file","Gacha-system-and-export-principal.html.vue"]]),h=JSON.parse('{"path":"/jp/advanced/Gacha-system-and-export-principal.html","title":"祈願システムとエクスポートの原理","lang":"ja-JP","frontmatter":{"headerDepth":2,"category":["FAQ"],"icon":"iconfont icon-read","order":8,"comment":false,"description":"Snap Hutaoは、ユーザーのログイン情報を取得し、原神APIと連携して祈願履歴を取得するために、複数の方法を使用します。","banner":"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/zh/advanced/Gacha-system-and-export-principal.html&has_description=False","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://hut.ao/zh/advanced/Gacha-system-and-export-principal.html"}],["link",{"rel":"alternate","hreflang":"en-us","href":"https://hut.ao/en/advanced/Gacha-system-and-export-principal.html"}],["link",{"rel":"alternate","hreflang":"id-id","href":"https://hut.ao/id/advanced/Gacha-system-and-export-principal.html"}],["link",{"rel":"alternate","hreflang":"ru-ru","href":"https://hut.ao/ru/advanced/Gacha-system-and-export-principal.html"}],["meta",{"property":"og:url","content":"https://hut.ao/jp/advanced/Gacha-system-and-export-principal.html"}],["meta",{"property":"og:site_name","content":"スナップ胡桃"}],["meta",{"property":"og:title","content":"祈願システムとエクスポートの原理"}],["meta",{"property":"og:description","content":"Snap Hutaoは、ユーザーのログイン情報を取得し、原神APIと連携して祈願履歴を取得するために、複数の方法を使用します。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/zh/advanced/Gacha-system-and-export-principal.html&has_description=False"}],["meta",{"property":"og:locale","content":"ja-JP"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"id-ID"}],["meta",{"property":"og:locale:alternate","content":"ru-RU"}],["meta",{"property":"og:updated_time","content":"2025-01-12T04:59:21.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/zh/advanced/Gacha-system-and-export-principal.html&has_description=False"}],["meta",{"name":"twitter:image:alt","content":"祈願システムとエクスポートの原理"}],["meta",{"property":"article:modified_time","content":"2025-01-12T04:59:21.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"祈願システムとエクスポートの原理\\",\\"image\\":[\\"https://opengraph.snapgenshin.cn/generate?url=https://hut.ao/zh/advanced/Gacha-system-and-export-principal.html&has_description=False\\"],\\"dateModified\\":\\"2025-01-12T04:59:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DGP-Studio\\",\\"url\\":\\"https://github.com/DGP-Studio\\"}]}"],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://hut.ao/jp/rss.xml","title":"スナップ胡桃 RSS Feed"}]]},"headers":[{"level":2,"title":"祈願の取得","slug":"祈願の取得","link":"#祈願の取得","children":[{"level":3,"title":"APIリクエストのキーパラメーター","slug":"apiリクエストのキーパラメーター","link":"#apiリクエストのキーパラメーター","children":[]},{"level":3,"title":"データ連結と完全な履歴の生成","slug":"データ連結と完全な履歴の生成","link":"#データ連結と完全な履歴の生成","children":[]}]},{"level":2,"title":"祈願の保存","slug":"祈願の保存","link":"#祈願の保存","children":[]},{"level":2,"title":"UIGF形式","slug":"uigf形式","link":"#uigf形式","children":[{"level":3,"title":"祈願のインポート","slug":"祈願のインポート","link":"#祈願のインポート","children":[]},{"level":3,"title":"祈願のエクスポート","slug":"祈願のエクスポート","link":"#祈願のエクスポート","children":[]}]}],"git":{"createdTime":1736657961000,"updatedTime":1736657961000,"contributors":[{"name":"Masterain","username":"Masterain","email":"i@irain.in","commits":2,"url":"https://github.com/Masterain"},{"name":"Mikachu2333","username":"Mikachu2333","email":"mikachu.23333@zohomail.com","commits":1,"url":"https://github.com/Mikachu2333"}]},"readingTime":{"minutes":1.46,"words":439},"filePathRelative":"jp/advanced/Gacha-system-and-export-principal.md","localizedDate":"2025年1月12日"}');export{c as comp,h as data};
