---
headerDepth: 2
category: [功能, 教程]
tag: [帧率解限, 服务器转换, 切换帐号]
order: 4
comment: false
description: 胡桃工具箱的高级启动器支持自定义启动参数、服务器转换、帧率解限等功能，显著提升用户游戏体验。
---

# 高级启动器

![游戏启动器](https://img.alicdn.com/imgextra/i4/1797064093/O1CN014YLRnj1g6e0zQaBl6_!!1797064093.png_.webp)

胡桃工具箱的高级启动器通过多样的设置选项，提供更灵活的游戏启动体验。

## 初始化设置

- 点击左侧菜单栏的“启动游戏”进入高级启动器功能。
  - 首次使用时将跳转至设置页面，要求设置游戏路径。
  - **请选择游戏主程序路径（`YuanShen.exe`），而非启动器路径（`launcher.exe`）。**
    - 示例路径：`D:\miHoYo Launcher\games\Genshin Impact Game\YuanShen.exe`
  - 成功检测游戏路径后，点击确认。
  - 若未安装游戏，可点击“安装游戏”按钮并按照提示设置安装目录，胡桃将自动下载并安装游戏。
- 配置完成后，点击右上角的“启动游戏”按钮启动游戏。

## 切换服务器

::: tip 权限提示
使用该功能需以管理员权限运行胡桃工具箱。
胡桃工具箱将在数据目录下创建名为 `ServerCache` 的文件夹，用于存储转换服务器所需文件，并自动检查更新。
:::

1. 进入“启动游戏”页面。
2. 在“服务器”项中选择目标服务器。

**可选服务器包括：**

| 选项            | 服务器                                            |
| --------------- | ------------------------------------------------- |
| 官方服 Default  | 中国大陆服务器                                    |
| 官方服 Official | 中国大陆服务器，与上一栏无实质区别                |
| 官方服 NoTapTap | 禁用 TapTap 登录的中国大陆服务器                  |
| 国际服 Default  | HoYoverse 国际服服务器                            |
| 国际服 Official | HoYoverse 国际服服务器，与上一栏无实质区别        |
| 国际服 Epic     | 使用 Epic 支付网关的 HoYoverse 国际服服务器       |
| 国际服 Google   | 使用 Google Pay 支付网关的 HoYoverse 国际服服务器 |

点击右上角的“启动游戏”按钮，胡桃将从官方服务器下载相关文件并应用，随后启动游戏。

## 账号保存

::: tip
本功能记录原神游戏账号的登录状态。
:::

1. 进入“启动游戏”页面。
2. 点击“检测账号”，胡桃工具箱将保存当前游戏的登录状态。
3. 在弹出的“为账号命名”窗口中输入名称并确认。
4. 注销当前账号并登录新账号，重复上述步骤保存多个账号。
5. 使用账号切换功能选择已保存的账号。
6. **不同服务器的登录状态互不影响**：
   - 例如，国服登录账号 A，外服登录账号 B；A 仅在国服时可见，B 仅在外服时可见。

## 使用米游社 / HoYoLAB 登录

::: warning
启用前需先开启“启动参数”功能。
:::

启用后，胡桃工具箱将使用已登录的米游社 / HoYoLAB 账户直接登录绑定的原神账号。

## Windows 平台 HDR 支持

原神内置的 HDR 功能需通过注册表键值开启，胡桃工具箱可启用此功能以提升视觉体验。

## 启动参数

在“启动参数”功能中，用户可设置以下高级选项：

- **独占全屏**：`-window-mode exclusive`
  - 游戏进程以独占全屏模式运行。
- **全屏**：`-screen-fullscreen`
  - 游戏以全屏模式启动。
- **无边框**：`-popupwindow`
  - 游戏以无边框窗口模式启动。
- **触摸屏模式**：`-platform_type CLOUD_THIRD_PARTY_MOBILE`
  - 启用触摸屏操作模式（键鼠输入将被禁用）。
- **分辨率设置**：
  - `-screen-width`：设置屏幕宽度（例如 1920）。
  - `-screen-height`：设置屏幕高度（例如 1080）。
- **显示器选择**：`-monitor`
  - 指定目标显示器运行游戏。
  - 若不确定显示器编号，可点击“识别显示器”获取提示。

## 资源下载

胡桃工具箱的“资源下载”页签提供中国大陆服务器的游戏安装包和增量包的实时链接，用户可直接跳转至浏览器下载。

- 用户需将下载的文件放置至游戏程序同级目录，并通过官方启动器完成更新。

## 注入功能

::: caution
注入功能使用不当可能导致设备或游戏数据损坏，启用即视为用户同意自行承担相关风险。
:::

### 帧率限制解除

依托 [UnlockerIsland 项目](https://github.com/DGP-Studio/UnlockerIsland)，解除原神的帧率限制。

- **使用方法：**
  1. 以管理员权限运行胡桃工具箱。
  2. 在“注入”模块中设置目标帧率。
  3. 点击“启动游戏”按钮。

#### 会导致**帧率限制解除失败**的因素：

1. 胡桃工具箱没有保持在后台运行
2. 游戏内未关闭**垂直同步**选项
3. 在显卡驱动中存在“最大帧速率”的设置
4. 在显卡驱动软件内存在未关闭的类似于“节能模式”的选项
5. 显卡性能不足
6. 未安装 MSVCRT 库

### 视野调整

调整相机视野范围和迷雾可见性，提供更佳的视觉体验。

### 队伍配置进度条设置

调整队伍配置进度条的显示状态，仅在**正常情况**下可切换队伍时生效。

## 进程联动

### 时长统计

需安装并配置 [Starward](https://github.com/Scighost/Starward)。启用后，胡桃工具箱将调用 Starward 接口以记录游戏时长。

### Better GI 联动

需安装并配置 [Better Genshin Impact](https://bgi.huiyadan.com/)。启用后，胡桃工具箱将调用其接口以启用基于计算机视觉技术（OCR）的自动化功能。

### Discord Activity

需安装并配置 [Discord](https://discord.com/)。启用后，胡桃工具箱将生成 Discord 资料卡上的实时游戏状态。

## 常见问题

### 如何通过胡桃工具箱快速启动游戏

- 在主程序中正确设置高级启动器功能。
- 在胡桃工具箱的主窗口未关闭时，可直接点击“主页-启动游戏”快速启动。
- 点击任务栏右下角的胡桃图标（通常会被系统自动收纳），选择“启动游戏”。

  ![quick-start](https://img.alicdn.com/imgextra/i3/1797064093/O1CN01Uu8QzN1g6du6MRp8h_!!1797064093.png_.webp)

### 为什么游戏登录状态会失效，导致切换账号功能无效

- 保存游戏登录状态的关键因素包括：
  - **网络环境**：公网 IP 地址频繁变更可能导致登录状态失效。
  - **设备 ID**：如更换网卡或 MAC 地址可能导致登录状态失效。
- 常见原因及解决方法：
  1. 确保账号已正确登录后，进入游戏。
  2. 关闭游戏并确认游戏进程已完全结束。
  3. 再次进行账号检测，确保登录状态被正确记录。

### 开门时出现错误码 `31-4302`

如遇到错误码 `31-4302`，可通过开启“启动游戏-注入-让我进去”选项解决此问题。

### 转换服务器失败后如何恢复游戏程序

::: info 功能原理说明
胡桃工具箱仅从原神官方服务器下载转换服务器所需文件，确保文件安全可靠。如果频繁因网络问题导致转换失败，可能是网络连接至目标服务器的质量较差。建议检查网络连接或联系网络服务提供商。
:::

在转换服务器过程中，若因意外退出或网络问题导致转换失败，可能会导致游戏客户端损坏。胡桃工具箱会提示 `游戏路径不正确，前往设置更改游戏路径`，此时游戏主程序文件可能已丢失。可按以下步骤手动恢复：

#### 手动恢复游戏主程序

1. **定位备份文件**：
   - 胡桃工具箱会在 `%userprofile%/Documents/Hutao/ServerCache` 目录下存储转换前的游戏备份文件。
   - 备份文件包括：`GenshinImpact.exe` 和 `GenshinImpact_Data`（国际服），或 `YuanShen.exe` 和 `YuanShen_Data`（国服）。
2. **检查游戏目录**：
   - 国际服目录应包含 `GenshinImpact.exe` 和 `GenshinImpact_Data`。
   - 国服目录应包含 `YuanShen.exe` 和 `YuanShen_Data`。
3. **手动恢复文件**：
   - 将备份目录下的文件复制到游戏主程序目录中，覆盖现有文件。
   - 如需切换服务器版本，将相关文件更名：例如，将 `YuanShen_Data` 更名为 `GenshinImpact_Data`。
4. **启动游戏**：
   - 重新进入胡桃工具箱的“启动游戏”界面并启动。
   - 如错误提示消失，可继续选择目标服务器并完成转换。

### 如何恢复 `config.ini` 配置文件

在某些情况下（如权限错误或转换服务器失败），`config.ini` 文件可能丢失，导致游戏无法启动。可手动创建并填入以下内容：

::: info
根据实际游戏版本修改 `game_version` 参数。
:::

#### 配置文件内容示例

::: tabs#game_config_samples
@tab 国服 Official

```ini
[General]
channel=1
cps=mihoyo
game_version=5.3.0
sub_channel=1
sdk_version=
game_biz=hk4e_cn
uapc={"hk4e_cn":{"uapc":""},"hyp":{"uapc":""}}
```

@tab 国际服 Official

```ini
[General]
channel=1
cps=mihoyo
game_version=5.3.0
sub_channel=0
sdk_version=
game_biz=hk4e_global
uapc={"hk4e_global":{"uapc":""},"hyp":{"uapc":""}}
```

:::

将配置文件保存到游戏安装目录下的 `/Genshin Impact Game/` 子目录即可恢复正常启动。
