---
headerDepth: 0
category: [功能,教程]
---

# 祈愿记录

抽卡是原神的核心玩法之一，无论是出于纪念、炫耀的目的还是认真规划抽取计划，对历史抽卡进行统计分析都是非常重要的。
但是原神官方只为玩家提供了半年的抽卡记录，这是很不友好的（~~但是他们还是统计了你一整年杀了多少提米的鸽子~~）。

因此，我们需要利用这半年的抽卡记录调取窗口，将抽卡记录转移到我们自己手中，这就是胡桃工具箱中祈愿记录导出功能的目的所在。

有关原神祈愿记录导出的技术原理，你可以参阅我们的[**祈愿系统与导出原理**](/FAQ/Gacha-system-and-export-principal.md)一文。

![祈愿导出](https://img.alicdn.com/imgextra/i3/1797064093/O1CN01B2DDii1g6du87XIIG_!!1797064093.png)

::: note 原神抽卡记录的延迟性
胡桃工具箱获取抽卡记录的来源也为米哈游服务器，因此短时间内刚刚结束的抽卡无法被获取。
当你在游戏内抽卡历史记录中看到了最新的一批抽卡记录，则可以在胡桃中获取统计数据。

:::

## 获取祈愿数据
### 利用 Stoken 从服务器获取最新的祈愿记录 <Badge text="推荐" type="tip" /> 
   
::: info 提示
- 已登录的米游社帐号是使用 Stoken 刷新方法的前提，你可以参考[米游社多帐号切换](mhy-account-switch.md)一文在胡桃工具箱中登录你的帐号
- Stoken 刷新方法暂不支持国际服
:::

- 在胡桃工具箱中确保你需要获取记录的米游社帐号已登录
- 从左侧菜单栏进入`祈愿记录`
- 点击右上角的`刷新`，并点击`Stoken刷新`
- 等待读取完毕，即可查看最新的祈愿记录
   
### 从网页缓存获取最新的祈愿记录 <Badge text="支持国际服" type="tip" />

- 从左侧菜单栏进入`祈愿记录`   
- 启动游戏并登入游戏，打开游戏内的祈愿历史记录   
- 回到胡桃工具箱，点击`刷新`按钮，在刷新菜单中点击`网页缓存刷新`

::: tip
若出现`网页缓存刷新`功能异常的情况：
- 从胡桃工具箱的`设置`中进入`缓存文件夹`
- 删除 `ImageCache` 文件夹
:::

### 通过输入 Url 获取祈愿记录 <Badge text="支持国际服" type="tip" />
- 如果你通过其它工具获取到了你祈愿历史记录的 Url，可以选择`手动输入Url`并根据提示操作
- 但应注意此类 Url **具有时效性**
   
### 对于全量刷新选项的补充说明  
     
在默认情况下，胡桃工具箱会在匹配到本地已有记录的祈愿ID后停止导入。
但如果你希望完整地获取原神服务器中所有的历史记录（即使它已经存在于你的本地祈愿记录中），你可以勾选`全量刷新`。  
    
**不勾选`全量刷新`不会使你丢失祈愿数据，勾选`全量刷新`也不会让你的本地记录错误地额外记录一次相同的祈愿数据。**   
    
### 从其它祈愿导出程序导入祈愿数据 <Badge text="UIGF" type="info" />
    
胡桃工具箱支持导入 `UIGF 数据格式` 的祈愿记录数据[^UIGF-Org]
     
如果你希望导入这一类数据，可以：
- 启动胡桃工具箱，从左侧菜单栏进入`祈愿记录`
- 点击右上角的`导入`
- 选择你的 UIGF Json 数据文件
- 根据界面确认导入数据  
    
## 导出祈愿数据 <Badge text="UIGF" type="info" />
     
胡桃工具箱支持导出 `UIGF数据格式` 的 Json 文件格式的祈愿记录数据
      
如果你希望导出祈愿数据，可以：
- 启动胡桃工具箱，从左侧菜单栏进入`祈愿记录`
- 选择您要导出的祈愿记录存档
- 点击`导出`按钮
  - 在弹出的界面选择您需要将此导出的祈愿记录数据文件存放的位置，并点击`导出`
- 导出完成   

[^UIGF-Org]: 统一标准化的原神数据格式由 [UIGF-Org](https://uigf.org/) 提供 