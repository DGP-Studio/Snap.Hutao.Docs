---
headerDepth: 2
icon: iconfont icon-warn
category: [FAQ]
order: 2
comment: false
---

# Общие исключения программы

Этот документ содержит решения **предсказуемых ошибок клиента**.

## Ошибка RuntimeEnvironmentException

- Исключение: `RuntimeEnvironmentException`
  - Подсказка: `Unable to set registry key without enabling long path`
- Источник проблемы: Предел длины пути в Windows по умолчанию установлен на 256 символов.
- Решение: Скачайте [EnableLongPaths.zip](https://d.hut.ao/d/tools/EnableLongPaths.zip), извлеките его и запустите файл `.reg`.

## Код возврата: -10001

- Эта ошибка поступает напрямую из MiHoYo BBS, подсказки включают
  - `Return Code: -10001`
  - `Return Code: -100`
- Источник проблемы
  1. Истек срок действия куки
  2. Ошибка сети
  3. Неточное системное время
- Решение
  1. В панели учетной записи выполните `Refresh Cookies`
  2. Удалите свою учетную запись и добавьте ее заново
  3. Синхронизируйте системное время

## Код возврата: 1034 Проверка не удалась

- Если Snap Hutao возвращает код состояния `1034` и указывает, что проверка не удалась (обычно во время операции Realtime Notes), это означает, что операция заблокирована системой MiHoYo BBS для борьбы с ботами
- Решение:
  - Зайдите в раздел `Realtime Notes`
  - Нажмите кнопку `Verify Current User and Role`
  - Следуйте инструкциям на сайте MiHoYo BBS для верификации
  - По завершении процесса верификации нажмите `Complete`, чтобы закрыть окно верификации
  - Теперь учетная запись должна вернуться к нормальному состоянию; Если нет, выполните шаги выше еще раз

::: tip

Если риск предупреждения слишком часто возникает, или верификация не может быть запущена вообще, это означает, что риск вашей учетной записи слишком велик; измените пароль, чтобы сбросить статус одновременного входа с нескольких устройств

:::

::: warning

- Вы вряд ли сможете пройти незаметную верификацию, когда ваша учетная запись **входит в другие удаленные инструменты Genshin** или **входит с нескольких устройств**. Это функция безопасности MiHoYo BBS и не может быть обойдена
- Если вы используете **несколько учетных записей MiHoYo BBS на своем устройстве**, **частое использование с использованием API MiHoYo BBS** приведет к блокировке вашего IP-адреса на определенное время (обычно не более 24 часов). Это функция безопасности MiHoYo BBS и не может быть обойдена

:::

## HttpRequestException Metadata Download Failed

### 403 (Forbidden) / 404 (Not Found)

Решение: Обновите Snap Hutao до последней версии

### 502 (Bad Gateway)

> Связанная проблема: [https://github.com/DGP-Studio/Snap.Hutao/issues/100](https://github.com/DGP-Studio/Snap.Hutao/issues/100)

Это исключение HTTP возникает, когда Snap Hutao не может получить удаленный ресурс (обычно статическое изображение и конфигурацию)

![HttpRequestException](https://img.alicdn.com/imgextra/i3/1797064093/O1CN01Tb2RUm1g6du5YeNuy_!!1797064093.jpg)

Если вы используете программное обеспечение прокси, вам может потребоваться отключить его или использовать прокси-режим TUN; в противном случае вам нужно использовать [Windows 8 AppContainer Loopback Utility](https://www.telerik.com/fiddler/add-ons), чтобы удалить [Ограничения Windows APP Container Loopback](https://learn.microsoft.com/zh-CN/windows/iot-core/develop-your-app/loopback).

Вы также можете выполнить следующий сценарий PowerShell, чтобы удалить все ограничения контейнера loopback

```powershell
FOR /F "tokens=11 delims=\" %p IN ('REG QUERY "HKCU\Software\Classes\Local Settings\Software\Microsoft\Windows\CurrentVersion\AppContainer\Mappings"') DO CheckNetIsolation.exe LoopbackExempt -a -p=%p
```

## Ошибка поиска требуемых модулей

Когда пользователь запускает игру с включенной функцией разблокировки частоты кадров, игра может не запускаться, и появится следующая ошибка:

1. Ошибка поиска требуемых модулей: не удалось прочитать ни одного модуля, драйвер защиты может быть загружен
2. Ошибка поиска требуемых модулей: тайм-аут

Эта проблема возникает только тогда, когда модуль анти-чита Genshin Impact запускается раньше модуля разблокировки частоты кадров.
Когда возникают эти ошибки, Snap Hutao завершит процесс игры, и вы можете перезапустить игру.
